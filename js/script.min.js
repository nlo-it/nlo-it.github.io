const loginLink=document.querySelector(".user-login-link"),loginForm=document.querySelector(".login-form"),loginModal=document.querySelector(".modal-login"),loginField=document.querySelector(".modal-login-input"),passField=document.querySelector(".modal-input-password"),closeModal=document.querySelector(".modal-login .close-btn");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("login")}catch(e){isStorageSupport=!1}loginLink.addEventListener("click",function(e){e.preventDefault(),loginModal.classList.remove("visually-hidden"),loginModal.classList.add("modal-show"),storage?(loginField.value=storage,passField.focus()):loginField.focus(),loginField.focus()}),closeModal.addEventListener("click",function(){loginModal.classList.add("visually-hidden"),loginModal.classList.remove("modal-show"),loginModal.classList.remove("modal-error")}),loginForm.addEventListener("submit",function(e){loginField.value&&passField.value?isStorageSupport&&localStorage.setItem("login",loginField.value):(e.preventDefault(),loginModal.classList.remove("modal-error"),loginModal.offsetWidth=loginModal.offsetWidth,loginModal.classList.add("modal-error"))});const openAddItem=document.querySelectorAll(".buy-btn"),addItemModal=document.querySelector(".modal-add-item"),closeAddItem=addItemModal.querySelector(".modal-add-item .close-btn"),shoppingContinue=addItemModal.querySelector(".add-item-btn");for(let e=0;e<openAddItem.length;e++)openAddItem[e].addEventListener("click",function(e){e.preventDefault(),addItemModal.classList.remove("visually-hidden"),addItemModal.classList.add("modal-add-item")});shoppingContinue.addEventListener("click",function(){addItemModal.classList.add("visually-hidden")}),closeAddItem.addEventListener("click",function(){addItemModal.classList.add("visually-hidden")}),window.addEventListener("keydown",function(e){27===e.keyCode&&addItemModal.classList.add("visually-hidden")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(loginModal.classList.contains("visually-hidden")||(loginModal.classList.add("visually-hidden"),loginModal.classList.remove("modal-show"),loginModal.classList.remove("modal-error")))});const openWriteUs=document.querySelector(".company-address"),writeUsForm=document.querySelector(".modal-write-us > form"),writeUsModal=document.querySelector(".modal-write-us"),writeUsName=document.querySelector(".user-name"),writeUsEmail=document.querySelector(".user-email"),closeWriteUs=document.querySelector(".modal-write-us .close-btn");try{storage=localStorage.getItem("userName")}catch(e){isStorageSupport=!1}openWriteUs.addEventListener("click",function(e){e.preventDefault(),writeUsModal.classList.remove("visually-hidden"),writeUsModal.classList.add("modal-show"),storage?(writeUsName.value=storage,writeUsEmail.focus()):writeUsName.focus(),writeUsName.focus()}),closeWriteUs.addEventListener("click",function(){writeUsModal.classList.add("visually-hidden"),writeUsModal.classList.remove("modal-show"),writeUsModal.classList.remove("modal-error")}),writeUsForm.addEventListener("submit",function(e){writeUsName.value&&writeUsEmail.value?isStorageSupport&&localStorage.setItem("userName",writeUsName.value):(e.preventDefault(),writeUsModal.classList.remove("modal-error"),writeUsModal.offsetWidth=writeUsModal.offsetWidth,writeUsModal.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(writeUsModal.classList.contains("visually-hidden")||(writeUsModal.classList.add("visually-hidden"),writeUsModal.classList.remove("modal-show"),writeUsModal.classList.remove("modal-error")))});const openMap=document.querySelector(".map"),mapModal=document.querySelector(".modal-map"),closeMap=document.querySelector(".modal-map .close-btn");openMap.addEventListener("click",function(){mapModal.classList.remove("visually-hidden")}),closeMap.addEventListener("click",function(){mapModal.classList.add("visually-hidden")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(mapModal.classList.contains("visually-hidden")||mapModal.classList.add("visually-hidden"))});
